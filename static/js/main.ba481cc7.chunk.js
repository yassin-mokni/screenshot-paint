(this["webpackJsonpscreenshot-my-draw"]=this["webpackJsonpscreenshot-my-draw"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var i=n(1),s=n.n(i),o=n(5),a=n.n(o),c=(n(15),n(6)),u=n(7),h=n(2),r=n(10),d=n(9),l=n(0);var p=function(e){var t="M "+e.line.map((function(e){return"".concat(e.get("x")," ").concat(e.get("y"))})).join(" L ");return Object(l.jsx)("path",{className:"path",d:t})};var v=function(e){var t=e.lines;return Object(l.jsx)("svg",{className:"painting",children:t.map((function(e,t){return Object(l.jsx)(p,{line:e},t)}))})},m=n(3),g=n(8),b=n.n(g),f=function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).paintZone=s.a.createRef(),e.state={lines:new m.a,isPainting:!1},e.screenshot=e.screenshot.bind(Object(h.a)(e)),e.handleMouseUp=e.handleMouseUp.bind(Object(h.a)(e)),e.handleMouseDown=e.handleMouseDown.bind(Object(h.a)(e)),e.handleMouseMove=e.handleMouseMove.bind(Object(h.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.handleMouseUp);var e=document.getElementById("paint"),t=document.getElementById("image");t.crossOrigin="Anonymous",e.addEventListener("mousemove",function(e){this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height));var n=this.canvas.getContext("2d").getImageData(e.offsetX,e.offsetY,1,1).data;0==n[0]&&0==n[1]&&0==n[2]&&255==n[3]&&this.setState({isPainting:!1})}.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.handleMouseUp)}},{key:"screenshot",value:function(){b()(document.querySelector("#paint"),{useCORS:!0}).then((function(e){console.log(e.toDataURL()),document.body.appendChild(e),document.getElementById("hint").style.display="block"}))}},{key:"handleMouseUp",value:function(){this.setState({isPainting:!1})}},{key:"handleMouseDown",value:function(e){if(0===e.button){var t=this.pointCoordinates(e);this.setState((function(e){return{lines:e.lines.push(new m.a([t])),isPainting:!0}}))}}},{key:"handleMouseMove",value:function(e){if(this.state.isPainting){var t=this.pointCoordinates(e);this.setState((function(e){return{lines:e.lines.updateIn([e.lines.size-1],(function(e){return e.push(t)}))}}))}}},{key:"pointCoordinates",value:function(e){var t=this.paintZone.current.getBoundingClientRect();return new m.b({x:e.clientX-t.left,y:e.clientY-t.top})}},{key:"render",value:function(){return Object(l.jsxs)("div",{id:"paint",className:"paintZone",ref:this.paintZone,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,children:[Object(l.jsx)(v,{lines:this.state.lines}),Object(l.jsx)("button",{className:"button",onClick:this.screenshot,children:"Screenshot"}),Object(l.jsx)("p",{id:"hint",style:{display:"none"},children:"Check the console to get the base64 encoded data URL"}),Object(l.jsx)("img",{id:"image",src:"https://yassine-mokni.github.io/screenshot-paint/mug.png",style:{visibility:"hidden"}})]})}}]),n}(s.a.Component),j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),s(e),o(e),a(e)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(f,{})}),document.getElementById("root")),j()}},[[17,1,2]]]);
//# sourceMappingURL=main.ba481cc7.chunk.js.map